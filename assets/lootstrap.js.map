{"version":3,"file":"lootstrap.js","sources":["../../javascript/src/Btn-ripple.js","../../javascript/index.umd.js"],"sourcesContent":["// https://stackoverflow.com/questions/30074246/how-to-create-ripple-effect-on-click-material-design\r\n// color = `var(--ls-btn-ripple-bg, #fff)`\r\n\r\nclass ImpulseStyleFactory {\r\n    static ANIMATION_DEFAULT_DURATION = 1;\r\n    static ANIMATION_DEFAULT_SIZE = 300;\r\n    static ANIMATION_RATIO = ImpulseStyleFactory.ANIMATION_DEFAULT_DURATION / ImpulseStyleFactory.ANIMATION_DEFAULT_SIZE;\r\n\r\n    static circleImpulseStyle(x, y, size, color = `var(--ls-btn-ripple-bg, #fff)`, duration = 1) {\r\n        return {\r\n            width: `${size}px`,\r\n            height: `${size}px`,\r\n\r\n            background: color,\r\n\r\n            borderRadius: `50%`,\r\n\r\n            display: `inline-block`,\r\n\r\n            pointerEvents: `none`,\r\n\r\n            position: `absolute`,\r\n\r\n            top: `${y - size / 2}px`,\r\n            left: `${x - size / 2}px`,\r\n\r\n            animation: `keyframesImpulse ${duration}s`,\r\n        };\r\n    }\r\n}\r\n\r\nclass Impulse {\r\n    static service = new Impulse();\r\n\r\n\r\n    static install(container) {\r\n        Impulse.service.containerRegister(container);\r\n    }\r\n\r\n    static destroy(container) {\r\n        Impulse.service.containerUnregister(container);\r\n    }\r\n\r\n    static applyToElement({x, y}, container) {\r\n        Impulse.service.createImpulse(x, y, container);\r\n    }\r\n\r\n    constructor() {\r\n        this.impulse_clickHandler = this.impulse_clickHandler.bind(this);\r\n        this.impulse_animationEndHandler = this.impulse_animationEndHandler.bind(this);\r\n\r\n        this.actives = new Map();\r\n    }\r\n\r\n    containerRegister(container) {\r\n        container.addEventListener('click', this.impulse_clickHandler);\r\n    }\r\n\r\n    containerUnregister(container) {\r\n        container.removeEventListener('click', this.impulse_clickHandler);\r\n    }\r\n\r\n    createImpulse(x, y, container) {\r\n        let {clientWidth, clientHeight} = container;\r\n\r\n        let impulse = document.createElement('div');\r\n        impulse.addEventListener('animationend', this.impulse_animationEndHandler);\r\n\r\n        let size = Math.max(clientWidth, clientHeight) * 2;\r\n        let color = container.dataset.color;\r\n\r\n        Object.assign(impulse.style, ImpulseStyleFactory.circleImpulseStyle(\r\n            x, y, size, color\r\n        ));\r\n\r\n        if (this.actives.has(container)) {\r\n            this.actives.get(container).add(impulse);\r\n        } else {\r\n            this.actives.set(container, new Set([impulse]));\r\n        }\r\n\r\n        container.dataset.active = 'true';\r\n\r\n        container.appendChild(impulse);\r\n    }\r\n\r\n\r\n    impulse_clickHandler({layerX, layerY, currentTarget: container}) {\r\n        this.createImpulse(layerX, layerY, container);\r\n    }\r\n\r\n    impulse_animationEndHandler({currentTarget: impulse}) {\r\n        let {parentNode: container} = impulse;\r\n\r\n        this.actives.get(container).delete(impulse);\r\n\r\n        if (!this.actives.get(container).size) {\r\n            this.actives.delete(container);\r\n\r\n            container.dataset.active = 'false';\r\n        }\r\n\r\n        container.removeChild(impulse);\r\n    }\r\n}\r\n\r\n\r\n/*** Usage\r\n *  let impulses = document.querySelectorAll('.Btn-ripple');\r\n *  let impulseAll = Array.from(impulses);\r\n *\r\n *  impulseAll.forEach(Impulse.install);\r\n * */\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n    // Code to be executed when the DOM is ready\r\n    let impulses = document.querySelectorAll('.Btn-ripple');\r\n    let impulseAll = Array.from(impulses);\r\n\r\n    impulseAll.forEach(Impulse.install);\r\n});\r\n\r\n\r\nexport default {ImpulseStyleFactory, Impulse};","/**\r\n * --------------------------------------------------------------------------\r\n * Lootstrap index.umd.js\r\n * Licensed under MIT (https://github.com/krsln/Lootstrap/blob/master/LICENSE)\r\n * --------------------------------------------------------------------------\r\n */\r\n\r\n\r\nimport Button from './src/Btn-ripple';\r\n\r\nexport default {\r\n    Button,\r\n};"],"names":["ImpulseStyleFactory","ANIMATION_DEFAULT_DURATION","ANIMATION_DEFAULT_SIZE","ANIMATION_RATIO","circleImpulseStyle","x","y","size","color","duration","width","height","background","borderRadius","display","pointerEvents","position","top","left","animation","Impulse","service","install","container","containerRegister","destroy","containerUnregister","applyToElement","createImpulse","constructor","impulse_clickHandler","bind","impulse_animationEndHandler","actives","Map","addEventListener","removeEventListener","clientWidth","clientHeight","impulse","document","createElement","Math","max","dataset","Object","assign","style","has","get","add","set","Set","active","appendChild","layerX","layerY","currentTarget","parentNode","delete","removeChild","impulses","querySelectorAll","impulseAll","Array","from","forEach","Button"],"mappings":"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"}